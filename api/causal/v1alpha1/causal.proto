syntax = "proto3";

package causal.v1alpha1;

option go_package = "github.com/w-h-a/caus/api/causal/v1alpha1";

service CausalDiscovery {
  rpc Discover(DiscoverRequest) returns (CausalGraph) {}
}

service CausalSimulation {
  rpc Simulate(SimulateRequest) returns (SimulateResponse) {}
}

message DiscoverRequest {
  string csv_data = 1;
  int32 max_lag = 2;
  float pc_alpha = 3;
}

message CausalGraph {
  repeated Node nodes = 1;
  repeated Edge edges = 2;
}

message Node {
  int32 id = 1;
  string label = 2;
}

message Edge {
  string source = 1;
  string target = 2;
  string type = 3;
  int32 lag = 4;
}

message SimulateRequest {
  string csv_data = 1;
  CausalGraph graph = 2;
  Intervention intervention = 3;
  int32  simulation_steps = 4;
}

message Intervention {
  string target_node = 1;
  string action = 2;
  double value = 3;
  int32 duration = 4;
}

message SimulateResponse {
  string json_results = 1;
}